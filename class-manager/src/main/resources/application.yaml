"%test":
  quarkus:
    console:
      color: true
    log:
      min-level: TRACE
  oprc:
    log: TRACE
    oc:
      orbitEnabled: false

"%dev":
  quarkus:
    console:
      color: true
    http:
      port: 8088
  oprc:
    log: DEBUG

"%prod":
  oprc:
    oc:
      kafkaEnabled: true

oprc:
  oc:
    clsProvisionTopic: oaas-cls
    kafkaEnabled: false
    fnProvisionTopic: oaas-fn
    orbitManagerHost: localhost
    orbitManagerPort: 8091
  log: INFO
  name: class-manager
  env: |
    OPRC_DB_PKG_HOST=localhost
    OPRC_DB_PKG_PORT=8529
    OPRC_DB_PKG_USER=root


quarkus:
  http:
    access-log:
      enabled: true
      pattern: '"%r" %s %b %{RESPONSE_TIME} ms'
      exclude-pattern: /q/.*
    record-request-start-time: true
  vertx:
    prefer-native-transport: true
  swagger-ui:
    always-include: true
  smallrye-openapi:
    store-schema-directory: ../doc/oc
    enable: true
  log:
    category:
      "org.hpcclab.oaas":
        level: ${oprc.log}
  container-image:
    image: ${ci.registry.image:oaas}/${oprc.name}${tag:}
  micrometer:
    export:
      json:
        enabled: true
        path: jsonmetrics
  native:
    resources:
      includes:
        - builtin/**
  kafka:
    devservices:
      enabled: false

  grpc:
    server:
      enable-reflection-service: true
      use-separate-server: false
    clients:
      orbit-manager:
        use-quarkus-grpc-client: true
        host: ${oprc.oc.orbitManagerHost}
        port: ${oprc.oc.orbitManagerPort}
mp:
  messaging:
    outgoing:
      fnProvisions:
        enabled: ${oprc.oc.kafkaEnabled}
        connector: smallrye-kafka
        topic: ${oprc.oc.fnProvisionTopic}
        value:
          serializer: io.quarkus.kafka.client.serialization.ObjectMapperSerializer
      clsProvisions:
        enabled: ${oprc.oc.kafkaEnabled}
        connector: smallrye-kafka
        topic: ${oprc.oc.clsProvisionTopic}
        value:
          serializer: io.quarkus.kafka.client.serialization.ObjectMapperSerializer
